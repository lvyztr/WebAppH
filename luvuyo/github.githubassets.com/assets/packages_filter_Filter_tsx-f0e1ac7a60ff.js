"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_filter_Filter_tsx"],{15774:(e,t,l)=>{l.d(t,{d:()=>s});var a=l(74848),i=l(77430),r=l(55461);let s=({value:e,providerIcon:t,squareIcon:l=!1})=>{if(e.avatar?.url)return(0,a.jsx)(i.r,{src:e.avatar.url,alt:(0,r.I8)(e.value)??"User Avatar",square:l,className:"ValueIcon-module__GitHubAvatar_0--_ADMP"});if(e.iconColor&&!e.icon)return(0,a.jsx)("div",{style:{backgroundColor:e.iconColor},className:"ValueIcon-module__Box_0--OhCJY"});if(e.icon){let t=e.iconColor?`${e.iconColor} !important`:"currentcolor",l=e.icon;return(0,a.jsx)(l,{fill:t})}return t?(0,a.jsx)(t,{}):null};try{s.displayName||(s.displayName="ValueIcon")}catch{}},19459:(e,t,l)=>{l.d(t,{D:()=>i});var a=l(39295);let i={filterInvalid:e=>`Filter contains ${e} issue${1===e?"":"s"}:`,filterBlockInvalid:e=>`${e} is invalid`,filterValuesUnsupported:e=>`Filter values are not supported for <pre>${e}</pre>`,filterProviderNotSupported:e=>`Filter '${e}' not supported`,filterProviderDeprecated:e=>`Filter '${e}' is deprecated and will be removed in the future`,filterValueEmpty:e=>`Empty value for <pre>${e}</pre>`,filterMultiValueFalse:e=>`Only one value allowed for <pre>${e}</pre>`,filterInvalidValue:(e,t)=>`Invalid value <pre>${t}</pre> for <pre>${e}</pre>`,filterProviderTopLevel:e=>`Filter <pre>${e}</pre> cannot be used within groups`,unbalancedQuotations:"Unbalanced quotation marks",unbalancedParentheses:"Unbalanced parentheses",maxNestedGroups:`Maximum nested groups of ${a.mn} exceeded`,advancedFilterDialogCloseConfirmation:{title:"Discard changes?",content:"You have unsaved changes. Are you sure you want to discard them?",cancelButtonContent:"Keep editing",confirmButtonContent:"Close and discard"},exclude:"Exclude",dividerValue:"%%DIVIDER%%"}},30080:(e,t,l)=>{let a;l.d(t,{Rx:()=>k,Yl:()=>b,Pt:()=>x});var i=l(74848),r=l(70170),s=l(88431),n=l(96540),o=l(19459),u=l(11683),d=l(36523),c=l(93330);let p=/:|,|\s(?=(?:[^"]*"[^"]*")*[^"]*$)/g;var v=l(65154),m=l(55461),h=l(4559);let f=(e="",t=!0)=>{a&&clearTimeout(a),a=setTimeout(()=>{(0,h.i)(e,{assertive:t})},150)};var g=l(96218),y=l(44398);let _=(0,n.createContext)(void 0),x=()=>{let e=(0,n.useContext)(_);if(!e)throw Error("useSuggestions must be used inside a SuggestionsContext");return e},k=25;function N(e,t){let l=[];return t&&(l=e.suggestions?.filter(e=>0>t.value.values.findIndex(t=>(0,m.M5)(t.value)===e.value&&!t.hasCaret)).sort((e,t)=>e.priority-t.priority)??[]),{...e,suggestions:l}}let b=({children:e,caretRef:t,inputRef:l})=>{let{config:a,inputContextRef:h}=(0,y.U2)(),{filterQuery:x,filterProviders:b,insertIntoQuery:w,rawFilterRef:$,replaceActiveBlockWithPresenceBlock:j,updateFilter:C,updateFromExternal:I}=(0,g.g0)(),F=(0,n.useRef)(null),B=(0,n.useRef)(null),{position:S,updatePosition:A}=function(e,t=[]){let l=(0,d.L)(e?.floatingElementRef),a=(0,d.L)(e?.caretElementRef),i=(0,d.L)(e?.inputElementRef),[r,o]=(0,n.useState)(void 0),v=(0,n.useCallback)(()=>{let t=(()=>{let e,t=Array.from(i.current?.closest(".styled-input-container")?.querySelectorAll(".delimiter")??[]),l=i.current?.value;if(!l||!i.current.selectionStart)return null;let a=[...l.slice(0,i.current.selectionStart).matchAll(p)];if(a.length<1)return i.current;for(let l=a.length??0;l>0;l--){let a=t?.[l-1];if(a&&!a?.classList.contains("text-delimiter")){e=a;break}}return e??i.current})()??i.current;l.current instanceof Element&&t instanceof Element?o((0,u.uG)(l.current,t,e)):o(void 0)},[l,a,...t]);return(0,s.N)(v,[v]),(0,c.w)(v),{floatingElementRef:l,caretElementRef:a,position:r,updatePosition:v}}({caretElementRef:t,floatingElementRef:B,inputElementRef:l,side:"outside-bottom",align:"start",alignmentOffset:-16,allowOutOfBounds:!1},[B.current,h.current?.styledInputBlockCount]),[V,D]=(0,n.useState)(!1),[E,T]=(0,n.useState)(!1),[P,R]=(0,n.useState)([]),[G,L]=(0,n.useState)(-1),M=(0,n.useCallback)(()=>{E||T(!0)},[E]),O=(0,n.useCallback)(()=>{T(!1),L(-1)},[]),W=(0,r.s)(f,500,{start:!1}),Q=(0,n.useCallback)(async(e,t)=>{let i=!0;if("button"===a.variant||h.current?.isComposing)return;R([]),A();let r=e??x,s=t??l.current?.selectionStart??-1,n={id:"cached-suggestions",suggestions:[]},u=n,d=[],c=r.activeBlock,p=c&&(0,m.v7)(c)?c:void 0,f=c?(0,m.DS)(c,s):"",g=f&&p&&p.provider?.isCompleteResultSetQuery?.(f);if(p){let[e]=(0,m.t4)(p,s);"value"===e&&f&&(u=N(n={id:"cached-suggestions",suggestions:p.provider?.findPrefetchedSuggestions?.(f)??[]},p))&&u.suggestions.length>0&&(M(),W(`${u.suggestions.length} ${1===u.suggestions.length?"suggestion":"suggestions"}`),R([u]))}if(u.suggestions.length<k&&!g){p&&p.provider?.isCompleteResultSetQuery?.(f)!==void 0&&D(!0),d=await r.getSuggestions(s,b,a),d[0]?.suggestions.unshift(...n.suggestions);let e=new Set;d[0]&&(d[0].suggestions=d[0]?.suggestions.filter(t=>{let l=(0,m.I8)(t.value)??"";return!e.has(l)&&e.add(l)})),d[0]&&c?.type===v._B.Text&&c.raw.startsWith("-")&&(d[0].title=o.D.exclude)}else d=[n];if(p){let e=(0,m.DS)(p,s),t=d[0]?.suggestions;1===d.length&&t&&(0,m.I8)(t[0]?.value)===e&&e.length>0&&1===t.length&&(i=!1)}if(p&&d[0]&&(d[0]=N(d[0],p),d[0].suggestions=d[0].suggestions.slice(0,k)),(0,m.Ed)(r,$?.current)&&r.isValidated){let e=d.reduce((e,t)=>e+t.suggestions.length,0);document.activeElement===l.current&&e>0&&W(`${e} ${1===e?"suggestion":"suggestions"}`,!1),R(d),0===n.suggestions.length&&L(-1),d.length>0&&i&&h.current?.inputHasFocus?M():O()}D(!1)},[a,x,l,b,M,A,$,h,O,W]),U=(0,n.useCallback)(e=>{let t;L(-1);let i=x.activeBlock,r=e.value.toString().startsWith("-"),s=!1;if(e.value===o.D.dividerValue)return;"keyword"===e.type?t=(0,m.jQ)(e.value):i&&i.type===v._B.Filter?r?t=(0,m.jQ)(e.value):(t=(0,m.jQ)(e.value),s=!0,O()):"-"===(t=(0,m.jQ)(e.value))||t?.endsWith(".")||(t+=a.filterDelimiter);let n=l.current?.selectionStart??-1;e.type===v.ak.NoValue?j("no"):e.type===v.ak.HasValue?j("has"):t?w(t,n,s):C()},[a.filterDelimiter,x.activeBlock,O,l,w,j,C]);(0,s.N)(()=>{I(async e=>{(0,m.Ed)(e,$?.current)&&await Q(e,l.current?.selectionStart??-1)})},[$,Q,x.raw,x,I,l]);let K=(0,n.useMemo)(()=>({activeSuggestion:G,hideSuggestions:O,isFetchingSuggestions:V,position:S,showSuggestions:M,suggestionGroups:P,suggestionsListRef:B,suggestionSelected:U,suggestionsVisible:E,setActiveSuggestion:L,updateSuggestions:Q,activeSuggestionRef:F}),[G,F,O,V,S,M,P,U,E,Q]);return(0,i.jsx)(_.Provider,{value:K,children:e})};try{_.displayName||(_.displayName="SuggestionsContext")}catch{}try{b.displayName||(b.displayName="SuggestionsContextProvider")}catch{}},36566:(e,t,l)=>{l.d(t,{M:()=>HasFilterProvider});var a=l(65154),i=l(88273);let HasFilterProvider=class HasFilterProvider extends i.Q{constructor(e,t){super(e,a.ak.HasValue,t)}}},39826:(e,t,l)=>{l.d(t,{Ge:()=>p,NH:()=>m});var a=l(74848),i=l(21513),r=l(96540),s=l(65154),n=l(55461),o=l(45099),u=l(96218),d=l(30080);let c=(0,r.createContext)(void 0),p=()=>{let e=(0,r.useContext)(c);if(!e)throw Error("useInput must be used inside a InputContext");return e},v=(e,t,l,a)=>{let i=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value");i?.set?.call(e,t),e.setSelectionRange(l,a??l),e.dispatchEvent(new Event("input",{bubbles:!0})),e.value=t},m=(0,r.forwardRef)(({caretRef:e=null,children:t,inputRef:l=null,value:p="",filterConfig:m},h)=>{let f=(0,r.useRef)(null);(0,i.T)(e,f);let g=(0,r.useRef)(null);(0,i.T)(l,g);let[y,_]=(0,r.useState)(!1),[x,k]=(0,r.useState)(!1),[N,b]=(0,r.useState)(-1),[w,$]=(0,r.useState)(-1),j=(0,r.useRef)(!1),[C,I]=(0,r.useState)(p),F=(0,r.useRef)(0),{hideSuggestions:B,suggestionGroups:S,activeSuggestion:A,setActiveSuggestion:V,suggestionsVisible:D,suggestionSelected:E,updateSuggestions:T}=(0,d.Pt)(),{forceReparse:P,onSubmit:R,rawFilterRef:G,updateFilter:L}=(0,u.g0)(),{config:M}=(0,o.U2)(),O=(0,r.useCallback)((e,t)=>{b(e),$(t??e)},[]);(0,r.useImperativeHandle)(h,()=>({caretStart:N,caretEnd:w,isComposing:j.current,inputHasFocus:x,styledInputBlockCount:F.current,updateCaretPosition:O,updateRawFilterValue:q}));let W=(0,r.useCallback)(e=>{if(j.current)return;let t=(0,n.jh)(S);if("ArrowLeft"===e.key||"ArrowRight"===e.key)B();else if("ArrowDown"===e.key)A+1>=t.length?V(-1):V(A+1),e.preventDefault();else if("ArrowUp"===e.key)A<0?V(t.length-1):V(A-1),e.preventDefault();else if("Enter"===e.key){if(D&&null!==A){let l=t[A];if(l){e.preventDefault(),E(l),g.current?.focus();return}}R(s.FT.ExplicitSubmit,"input_with_enter"),B()}else if("Escape"===e.key)D&&(B(),e.stopPropagation());else if("Home"===e.key||"End"===e.key)V(-1);else if(m.groupAndKeywordSupport&&["("].includes(e.key)||'"'===e.key){let t=e.currentTarget,l=e.key;if(t.selectionStart!==t.selectionEnd&&["(",'"'].includes(l)){let a="("===l?")":'"',i=`${t.value.slice(0,N)}${l}${t.value.slice(N,w)}${a}${t.value.slice(w)}`;v(t,i,N+1,w+1),e.preventDefault();return}let a=t.selectionEnd??t.selectionStart??-1;if('"'===l&&'"'===t.value.charAt(a)){v(t,t.value,N+1),e.preventDefault();return}if(t.value.charAt(a).match(/\w/g)||t.value.charAt(a-1).match(/[\w"]/g))return;if("("===l){for(let[e,l]of(0,n.Dy)(t.value))if(a>e&&a<=l)return}e.preventDefault();let i="("===l?")":'"',r=`${t.value.slice(0,a)}${l}${i}${t.value.slice(a)}`;v(t,r,a+1)}else if("Backspace"===e.key){let t=e.currentTarget,l=t.selectionEnd??-1;if(m.groupAndKeywordSupport&&"("===t.value.charAt(l-1)&&")"===t.value.charAt(l)||'"'===t.value.charAt(l-1)&&'"'===t.value.charAt(l)){e.preventDefault();let a=`${t.value.slice(0,l-1)}${t.value.slice(l+1)}`;v(t,a,l-1)}}},[A,m.groupAndKeywordSupport,B,w,N,R,V,E,S,D]),Q=(0,r.useCallback)(()=>{k(!0),y?_(!1):P(-1,async e=>{(0,n.Ed)(e,G?.current)&&await T(e,N)})},[y,P,G,T,N]),U=(0,r.useCallback)(()=>{y||(k(!1),P(-1),B())},[y,P,B]),K=(0,r.useCallback)(()=>{j.current=!0,B()},[B]),H=(0,r.useCallback)(()=>{j.current=!1},[]),z=(0,r.useCallback)(e=>{let t=e.currentTarget,l=t.value;if(l===C)return;I(l),e.preventDefault();let a="button"!==M.variant?t.selectionStart??-1:-1,i="button"!==M.variant?t.selectionEnd??-1:-1;L(l,a,e=>{T(e,a)}),O(a,i)},[M.variant,L,O,T,C]),q=(0,r.useCallback)(e=>{e!==C&&(I(e),L(e,-1))},[C,L]),X=(0,r.useCallback)(e=>{F.current=e},[]),Z=(0,r.useCallback)(()=>{_(!0)},[]),Y=(0,r.useMemo)(()=>({caretRef:f,inputFocused:x,inputKeyDown:W,inputOnBlur:U,inputOnCompositionStart:K,inputOnCompositionEnd:H,inputOnChange:z,inputOnFocus:Q,inputRef:g,inputSelectionEnd:w,inputSelectionStart:N,inputValue:C,suspendFocus:Z,updateInputSelection:O,updateStyledInputBlockCount:X}),[x,W,U,K,H,z,Q,w,N,C,Z,O,X]);return(0,a.jsx)(c.Provider,{value:Y,children:t})});m.displayName="InputContextProvider";try{c.displayName||(c.displayName="InputContext")}catch{}},44398:(e,t,l)=>{l.d(t,{U2:()=>c,dv:()=>p});var a=l(74848),i=l(21513),r=l(96540),s=l(33727),n=l(96218),o=l(39826),u=l(30080);let d=(0,r.createContext)(void 0),c=()=>{let e=(0,r.useContext)(d);if(!e)throw Error("useFilter must be used inside a FilterProvider");return e},p=({children:e,context:t,customParser:l,rawFilter:c,filterDelimiter:p=s.a7.filterDelimiter,inputRef:v=null,onChange:m,onParse:h,onSubmit:f,onValidation:g,providers:y,settings:_,valueDelimiter:x=s.a7.valueDelimiter,variant:k})=>{let N=(0,r.useMemo)(()=>({filterDelimiter:p,valueDelimiter:x,...s.Fy,..._,variant:k}),[p,_,x,k]),b=(0,r.useRef)(null);(0,i.T)(v,b);let w=(0,r.useRef)(null),$=(0,r.useRef)(null),j=(0,r.useId)(),C=(0,r.useMemo)(()=>({config:N,id:j,inputContextRef:$}),[N,j,$]);return(0,r.useEffect)(()=>{$.current?.updateRawFilterValue(c)},[c]),(0,a.jsx)(d.Provider,{value:C,children:(0,a.jsx)(n.xI,{customParser:l,context:t,filterConfig:N,providers:y,inputRef:b,onChange:m,onParse:h,onSubmit:f,onValidation:g,rawFilter:c,children:(0,a.jsx)(u.Yl,{caretRef:w,inputRef:b,children:(0,a.jsx)(o.NH,{caretRef:w,inputRef:b,ref:$,value:c,filterConfig:N,children:e})})})})};try{d.displayName||(d.displayName="FilterContext")}catch{}try{p.displayName||(p.displayName="FilterContextProvider")}catch{}},45099:(e,t,l)=>{l.d(t,{Ge:()=>i.Ge,Pt:()=>s.Pt,U2:()=>r.U2,g0:()=>a.g0});var a=l(96218),i=l(39826),r=l(44398),s=l(30080)},63415:(e,t,l)=>{l.d(t,{i:()=>FilterQueryParser});var a=l(35750),i=l(18150),r=l(85242),s=l(50467),n=l(46632),o=l(33727),u=l(39295),d=l(19459),c=l(95104),p=l(65154),v=l(55461);let m=(0,n.A)((e,t)=>RegExp(`([\\s${e}"]*?)((?:>|<|>=|<=)*[\\w\\d\\-_"'?/\\.=+!@#$%^&*`+(t?");:\\p{Extended_Pictographic}]*)$":"();:\\p{Extended_Pictographic}]*)$"),"gu")),h=(0,n.A)((e,t)=>RegExp(`[\\s${e}${t?")":""}](?=(?:[^"]*"[^"]*")*[^"]*$)`,"g")),f=(0,n.A)(e=>RegExp(`${e}(?=(?:[^"]*"[^"]*")*[^"]*$)`,"g"));var g=new WeakMap,y=new WeakMap;let FilterQueryParser=class FilterQueryParser{parse(e,t=new c.N("",[],this.config),l=-1){let a,i=function(e,t,l=-1){let{matchedParens:a,unmatchedOpenParens:i,unmatchedCloseParens:r}=function(e){let t=[],l=[],a=!1,i=new Set,r=new Set;for(let i=0;i<e.length;i++)'"'===e[i]&&(a=!a),"("!==e[i]||a?")"===e[i]&&!a&&t.length>0?l.push([t.pop(),i]):")"!==e[i]||a||r.add(i):t.push(i);let s=new Map;for(let[e,t]of l)s.set(e,t);for(let e of t)i.add(e);return{matchedParens:s,unmatchedOpenParens:i,unmatchedCloseParens:r}}(e),s=0,n=0,o=0;return function c(m=e.length){let h=[],f=e.substring(0,m);for(;s<m;)if(t&&void 0!==a.get(s)){let t=s,i=a.get(s);s+=1;let r=(o+=1)>u.mn;h.push({id:n,type:p._B.Group,raw:e.substring(t,i+1),blocks:c(i),groupDepth:o,startIndex:t,endIndex:i,hasCaret:(0,v.dV)(l,t,i),valid:!r,validations:r?[{type:p.b.MaxNestedGroups,message:d.D.maxNestedGroups}]:[]}),o-=1,s=i+1}else if(t&&"("===f[s])h.push({id:n,type:p._B.UnmatchedOpenParen,raw:"(",startIndex:s,endIndex:s+1,hasCaret:(0,v.dV)(l,s+1,s+1),valid:!1,validations:[{type:p.b.UnbalancedParentheses,message:d.D.unbalancedParentheses}]}),n+=1,s+=1;else if(t&&")"===f[s])h.push({id:n,type:p._B.UnmatchedCloseParen,raw:")",startIndex:s,endIndex:s+1,hasCaret:(0,v.dV)(l,s+1,s+1),valid:!1,validations:[{type:p.b.UnbalancedParentheses,message:d.D.unbalancedParentheses}]}),n+=1,s+=1;else if(f[s]?.search(/\s/)===0){let e=f[s]??"";for(let t=s+1;t<m;t++)if(f[t]?.search(/\s/)===0)e+=f[t]??"";else break;h.push({id:n,type:p._B.Space,raw:e,startIndex:s,endIndex:s+e?.length,hasCaret:(0,v.dV)(l,s+1,s+e?.length)}),n+=1,s+=e?.length}else{let e,a=function(e,t,l){let a=0,i=null;do{let r=i?i+1:t,s=l?e.slice(r).search(/\s|\(|\)/):e.slice(r).search(/\s/);i=-1===s?-1:r+s,a=0;for(let t=0;t<i;t++)'"'===e[t]&&(a+=1)}while(a%2==1)return i}(f,s,t);a>-1&&(e=a>-1&&f[a]?.match(/\s/)?a+1:a);let o=f.substring(s,e).trimEnd();h.push({id:n,type:p._B.Text,raw:o,startIndex:s,endIndex:s+o.length,hasCaret:(0,v.dV)(l,s,s+o.length),valid:0===i.size&&0===r.size,validations:[]}),n+=1,s+=o.length}return h}()}(e,this.config.groupAndKeywordSupport??!1,l),r=e=>{for(let[t,i]of e.entries())if(i.type!==p._B.Space&&i.type!==p._B.UnmatchedOpenParen&&i.type!==p._B.UnmatchedCloseParen)if(this.config.groupAndKeywordSupport&&(0,v.W9)(i))i.blocks=r(i.blocks),!i.blocks.length&&i.hasCaret&&(a=i);else{let r=i;if(this.config.groupAndKeywordSupport&&u.d6.includes(r.raw))r.type=p._B.Keyword;else{let a=r.raw,i=a.indexOf(this.config.filterDelimiter),s=a.substring(0,i),n=this.filterProviders.find(e=>(0,v.kZ)(e,s));n&&(r=this.processFilterBlock(r,n,i,l),e[t]=r)}r.hasCaret&&(a=r)}else i.type===p._B.Space&&i.hasCaret||i.type===p._B.UnmatchedOpenParen&&i.hasCaret?a=i:i.type===p._B.UnmatchedCloseParen&&i.hasCaret&&(a=i);return e};return i=r(i),new c.N(e,i,this.config,a,t.instanceContext)}replaceActiveBlockWithPresenceBlock(e,t){let l,a=0,i=e.activeBlock;if(!(i&&(0,v.v7)(i)))return[e.raw,e.raw.length];{let r=e.raw.substring(0,i.startIndex),s=e.raw.substring(i.endIndex);return a=(l=`${r}${t}${this.config.filterDelimiter}${i.key.value}`).length,[l+=s&&s[0]?.search(/\s/)!==0?` ${s}`:s,a]}}insertSuggestion(e,t,l){let a,i=0,r=e.activeBlock;if(r&&(0,v.v7)(r)){let s=e.raw.substring(0,r.startIndex),n=e.raw.substring(r.endIndex),o=[],u=r.key.value;if(t.startsWith("-"))u=t,i=(a=`${s}${u}${this.config.filterDelimiter}`).length;else{for(let e of r.value.values)(0,v.dV)(l,e.startIndex,e.endIndex)?(i=e.startIndex+t.length,o.push(t)):o.push((0,v.I8)(e.value)??"");a=`${s}${u}${this.config.filterDelimiter}${o.join(this.config.valueDelimiter)}`}a+=n}else if(r&&(0,v.ON)(r)&&l-r.startIndex<=r.raw.indexOf(this.config.filterDelimiter)){let l=e.raw.substring(0,r.startIndex),s=e.raw.substring(r.endIndex),n=r.raw.indexOf(this.config.filterDelimiter),o=r.raw.substring(n+1);a=`${l}${t}${o}${s}`,i=l.length+t.length}else if(l>=0){let r=e.raw.substring(0,l),s=e.raw.substring(l);this.NEXT_DELIMITER_REGEX.lastIndex=0;let n=this.NEXT_DELIMITER_REGEX.exec(s);s=n?s.substring(n.index):"",a=(r=r.replace(this.LAST_DELIMITER_REGEX,"$1")+t)+s,i=r.length}else i=(a=e.raw+t).length;return[a,i]}getRaw(e){let t="";for(let l of e.blocks)(0,v.aK)(l)?(t+=l.key.value,t+=l.value.raw?`${e.config.filterDelimiter}${l.value.raw}`:""):t+=l.raw;return t}validateFilterProvider(e,t=!1){return e.options.support.status===p.b9.Unsupported?[!1,{type:p.b.FilterProviderUnsupported,message:e.options.support.message??d.D.filterProviderNotSupported(e.key)}]:e.options.support.status===p.b9.Deprecated?[!1,{type:p.b.FilterProviderDeprecated,message:e.options.support.message??d.D.filterProviderDeprecated(e.key)}]:!t&&u.jb.includes(e.key)?[!1,{type:p.b.FilterProviderTopLevel,message:d.D.filterProviderTopLevel(e.key)}]:[!0,void 0]}processFilterBlock(e,t,l,i){let r=e.startIndex,s=e.raw.substring(0,l),n=e.raw.substring(l+1),o=(0,v.zB)(t,s,n)??p.tl.Is,u=r+l+1,d=n.split(this.ITEMS_REGEX);if(o===p.tl.Between){let e=[];d.map(t=>{let l=t.split("..").filter(e=>e);l.length<2&&(t.startsWith("..")?l=["",...l]:l.push("")),e=[...e,...l]}),d=e}let c=d.map(e=>{let l={startIndex:u,endIndex:u+e.length,hasCaret:(0,v.dV)(i,u,u+e.length),value:e,valid:!!(0,a._)(this,y).has(`${s}${this.config.filterDelimiter}${(0,v.I8)(e)}`)||void 0};t.filterValues&&void 0===l.valid&&t.filterValues?.find(t=>!!((0,v.I8)(t.value)===e||t.aliases?.includes(e))&&(l.valid=!0,!0));let r=o===p.tl.Between?2:1;return u=u+e.length+r,l});return{...e,type:p._B.Filter,provider:t,operator:o,valid:!!(0,a._)(this,y).has(e.raw)||void 0,key:{startIndex:r,endIndex:r+l,hasCaret:(0,v.dV)(i,r,r+l),value:s},value:{startIndex:r+l+1,endIndex:r+e.raw.length,hasCaret:(0,v.dV)(i,r+l+1,r+e.raw.length),values:c,raw:n}}}async validateQueryBlock(e,t,l=!1){if((0,v.v7)(e)){let[i,r]=this.validateFilterProvider(e.provider,l),s=await e.provider.validateFilterBlockValues?.(t,e,e.value.values,this.config);s.map(t=>{t.valid&&(0,a._)(this,y).add(`${e.provider.key}${this.config.filterDelimiter}${(0,v.I8)(t.value)}`)});let n=s.every(e=>e.valid)&&i;return n&&(0,a._)(this,y).add(e.raw),{...e,valid:n,key:{...e.key,valid:i,validations:r?[r]:void 0},value:{...e.value,values:s}}}return e}async validateGroupBlock(e,t){let l=await Promise.all(e.blocks.map(e=>(0,v.W9)(e)?this.validateGroupBlock(e,t):this.validateQueryBlock(e,t)));return{...e,blocks:l}}async validateFilterQuery(e){let t=[];e.blocks.map(l=>{(0,v.W9)(l)?t.push(this.validateGroupBlock(l,e)):(0,v.h8)(l)&&t.push(this.validateQueryBlock(l,e,!0))});let l=await Promise.all(t);return!(0,a._)(this,g)[e.raw]&&(0,v.Ed)(e)&&((0,a._)(this,g)[e.raw]=e),new c.N(e.raw,l,this.config,e.activeBlock,e.instanceContext,!0)}constructor(e=[],t){(0,s._)(this,"filterProviders",[]),(0,s._)(this,"config",void 0),(0,i._)(this,g,{writable:!0,value:{}}),(0,i._)(this,y,{writable:!0,value:void 0}),(0,s._)(this,"NEXT_DELIMITER_REGEX",void 0),(0,s._)(this,"ITEMS_REGEX",void 0),(0,s._)(this,"LAST_DELIMITER_REGEX",void 0),this.filterProviders=e,this.config=t??o.a7,(0,r._)(this,y,new Set),this.NEXT_DELIMITER_REGEX=h(this.config.valueDelimiter,this.config.groupAndKeywordSupport??!1),this.ITEMS_REGEX=f(this.config.valueDelimiter),this.LAST_DELIMITER_REGEX=m(this.config.valueDelimiter,this.config.groupAndKeywordSupport??!1)}}},76904:(e,t,l)=>{l.d(t,{A:()=>ValueValidator,e:()=>RootFilterProvider});var a=l(50467),i=l(33727),r=l(65154),s=l(55461);let RootFilterProvider=class RootFilterProvider{shouldGetSuggestions(e){return e&&e.type!==r._B.Space&&(0,s.Bt)(e,this.options.filterTypes.multiValue)}allowsFilterValues(){return!1!==this.options.filterTypes.inclusive||!1!==this.options.filterTypes.exclusive}constructor(e,t){(0,a._)(this,"key",void 0),(0,a._)(this,"aliases",void 0),(0,a._)(this,"displayName",void 0),(0,a._)(this,"description",void 0),(0,a._)(this,"priority",void 0),(0,a._)(this,"type",void 0),(0,a._)(this,"icon",void 0),(0,a._)(this,"options",void 0),Object.assign(this,e),this.key=e.key,this.icon=e.icon,this.type=r.CH.Text,this.displayName=e.displayName??(0,s.ZH)(e.key),this.options={...i.dQ,priority:e.priority,...t,filterTypes:{...i.dQ.filterTypes,...t?.filterTypes}},this.priority=this.options.priority}};let ValueValidator=class ValueValidator extends RootFilterProvider{validateValue(e,t,l){return!!l&&l}}},88273:(e,t,l)=>{l.d(t,{Q:()=>ValuePresenceFilterProvider});var a=l(50467),i=l(59403),r=l(91385),s=l(33727),n=l(39295),o=l(65154),u=l(55461),d=l(15774),c=l(76904);let p={[o.ak.HasValue]:n._i.has,[o.ak.NoValue]:n._i.no};let ValuePresenceFilterProvider=class ValuePresenceFilterProvider extends c.e{getSuggestions(e,t,l,a){if(!this.shouldGetSuggestions(t))return null;let s=(0,u.DS)(t,a),n=[];if(!s)return this.filterValues.filter(t=>(0,u.Di)(e,this.key,(0,u.M5)(t.value)).length<1);for(let t of this.filterValues){let{value:l,displayName:a}=t,d=(0,u.I8)(l),c=!!d&&(0,r.qA)(s,d),p=!!a&&(0,r.qA)(s,a);!((0,u.Di)(e,this.key,(0,u.M5)(d)).length>0)&&d&&(c||p)&&(t.priority-=(0,i.dt)(s,d),n.push({...t,type:o.ak.Value}))}return n}validateFilterBlockValues(e,t,l){return l.map((a,i)=>{let r=(0,u.I8)(a.value),s=(0,u.Di)(e,this.key,(0,u.M5)(r)).sort((e,t)=>e.id-t.id),n=!!r&&!!this.filterValues.find(e=>(0,u.SH)((0,u.I8)(e.value)??"",r));return s[0]?.id!==void 0&&(t.id!==s[0].id||l.findIndex(e=>e.value===r)<i)&&(n=!1),{...a,valid:n}})}getValueRowProps(e){return{text:e.displayName??(0,u.I8)(e.value)??"",leadingVisual:(0,d.d)({value:e})}}constructor(e,t,l){super(p[t],l),(0,a._)(this,"filterValues",void 0),this.options={...s.dQ,...l,filterTypes:{...s.dQ.filterTypes,valueless:!1,...l?.filterTypes}},this.type=o.CH.Select,this.filterValues=e.map(e=>({...e,ariaLabel:`${e.displayName}, ${this.displayName}`}))}}},92415:(e,t,l)=>{l.d(t,{uW:()=>_.uW,_B:()=>_._B,_i:()=>ee._i,$D:()=>ee.$D,sS:()=>ee.sS,dJ:()=>eF,tl:()=>_.tl,CH:()=>_.CH,n5:()=>e$,ak:()=>_.ak,a6:()=>ee.a6,b9:()=>_.b9,FT:()=>_.FT,bO:()=>ee.bO,yV:()=>ee.yV,Xl:()=>eb,b:()=>_.b,a7:()=>ee.a7,dQ:()=>ee.dQ});var a=l(74848),i=l(57224),r=l(29731),s=l(9790),n=l(34164),o=l(96540),u=l(69599),d=l(30459),c=l(38621),p=l(59394),v=l(21373),m=l(15220),h=l(46632),f=l(19459),g=l(45099),y=l(51228),_=l(65154),x=l(55461),k=l(94236),N=l(5524);let b=(0,o.forwardRef)(({size:e,filterProviders:t,addNewFilterBlock:l},i)=>{let[s,n]=(0,o.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(v.Q,{size:e,ref:i,onClick:()=>n(!s),...(0,r.G)("afd-add-filter"),children:[(0,a.jsx)(c.PlusIcon,{className:"AddFilterButton-module__Octicon_0--ZaNdq"}),"Add a filter"]}),(0,a.jsx)(k.W,{anchorRef:i,open:s,onOpenChange:n,children:(0,a.jsx)(k.W.Overlay,{className:"AddFilterButton-module__ActionMenu_Overlay_0--zd0cn",children:(0,a.jsx)(N.l,{...(0,r.G)("afd-add-filter-options"),className:"AddFilterButton-module__ActionList_0--DDKey",children:t.map(e=>{let{icon:t}=e;return(0,a.jsxs)(N.l.Item,{onSelect:()=>l(e),role:"menuitem",className:"AddFilterButton-module__ActionList_Item_0--OLnl_",children:[t&&(0,a.jsx)(N.l.LeadingVisual,{children:(0,a.jsx)(t,{})}),e.displayName??e.key]},`advanced-filter-add-provider-${e.key}`)})})})})]})});b.displayName="AddFilterButton";let w=({isNarrowBreakpoint:e,addFilterButtonMobileRef:t,filterProviders:l,addNewFilterBlock:i})=>(0,a.jsxs)("div",{className:"BlankState-module__Box_0--A2T3t",...(0,r.G)("afd-no-content"),children:[(0,a.jsx)("div",{className:"BlankState-module__Box_1--RFnfO",children:"Build complex filter queries"}),(0,a.jsx)("div",{className:"BlankState-module__Box_2--DdKMe",children:"To start building your query add your first filter using the button below."}),(0,a.jsx)("div",{className:"BlankState-module__Box_3--iGsRg",children:(0,a.jsx)(b,{size:e?"medium":"small",ref:t,filterProviders:l,addNewFilterBlock:i})})]});try{w.displayName||(w.displayName="BlankState")}catch{}var $=l(91385),j=l(39295);let C="AdvancedFilterItem-module__Box_4--gXW0e",I="AdvancedFilterItem-module__Text_1--YhxyF",F=({filterBlock:e,index:t,setFilterOperator:l})=>{let i=e.operator?j._W[e.operator]:j._W[_.tl.Is];return(0,a.jsxs)(k.W,{children:[(0,a.jsx)(k.W.Anchor,{children:(0,a.jsx)(v.Q,{size:"small",disabled:!e.provider,id:`afd-row-${t}-operator`,"aria-label":`${i&&i.trim()?`${i.trim()}, `:""}Operator ${t+1}`,className:"OperatorSelect-module__Button_0--JzNkw",block:!0,alignContent:"start",trailingAction:()=>(0,a.jsx)(c.TriangleDownIcon,{className:"OperatorSelect-module__Octicon_0--t_v4X"}),children:i})}),(0,a.jsx)(k.W.Overlay,{width:"auto",children:(0,a.jsx)(N.l,{selectionVariant:"single",children:(0,x.nV)(e.provider).map(t=>(0,a.jsx)(N.l.Item,{onSelect:()=>l(t),selected:t===e.operator,children:j._W[t]},`advanced-filter-item-${e.id}-operator-${t}`))})})]})};try{F.displayName||(F.displayName="OperatorSelect")}catch{}let B="QualifierSelect-module__Octicon_0--KZDRV",S=({filterBlock:e,filterProviders:t,index:l,setFilterProvider:i})=>{let r=e?.provider?.icon,s=e?.provider?.displayName??e?.provider?.key;return(0,a.jsxs)(k.W,{children:[(0,a.jsx)(k.W.Anchor,{children:(0,a.jsx)(v.Q,{id:`afd-row-${l}-qualifier`,"aria-label":`${s&&s.trim()?`${s.trim()}, `:""}Qualifier ${l+1}`,className:(0,n.$)("advanced-filter-item-qualifier","QualifierSelect-module__Button_0--lRMli"),size:"small",block:!0,alignContent:"start",leadingVisual:()=>r?(0,a.jsx)(r,{className:B}):null,trailingAction:()=>(0,a.jsx)(c.TriangleDownIcon,{className:B}),children:s??"Select a filter"})}),(0,a.jsx)(k.W.Overlay,{className:"QualifierSelect-module__ActionMenu_Overlay_0--MfFvm",children:(0,a.jsx)(N.l,{selectionVariant:"single",className:"QualifierSelect-module__ActionList_0--scqEo",children:t.map((t,l)=>{let{icon:r}=t;return(0,a.jsxs)(N.l.Item,{onSelect:()=>i(t),selected:t.key===e.provider?.key,children:[r&&(0,a.jsx)(N.l.LeadingVisual,{children:(0,a.jsx)(r,{})}),t.displayName??t.key]},`advanced-filter-item-${e.id}-provider-${t.key}-${l}`)})})})]})};try{S.displayName||(S.displayName="QualifierSelect")}catch{}var A=l(26108);let V=({ariaLabel:e,onClick:t,className:l,testId:i=""})=>(0,a.jsx)(A.K,{icon:c.XIcon,size:"small",variant:"invisible","aria-label":e,onClick:t,className:(0,n.$)(l,"RemoveFilterButton-module__IconButton_0--fEf5k"),...(0,r.G)(i)});try{V.displayName||(V.displayName="RemoveFilterButton")}catch{}var D=l(5839),E=l(99511),T=l(77430),P=l(94602);let R=e=>{let t=e.value?.values.filter(e=>e.valid&&""!==e.value)??[];if(0===t.length)return"Make a selection";let l=e.value?.values?.[0]?.displayName,a=e.value?.values?.[0]?.name,i=e.value?.values?.[0]?.description,r=(0,x.I8)(e.value?.values?.[0]?.value),s=`${t.length} selected`;return 1===t.length&&(s=l??a??i??r),s},G=({filterBlock:e})=>{let t=e.value?.values.filter(e=>e.valid&&""!==e.value)??[];return(0,a.jsxs)("div",{className:(0,n.$)({"ValuePlaceholder-module__Box_0--wZEYD":0===t.length,"ValuePlaceholder-module__Box_1--kQ66h":t.length>0}),children:[(0,a.jsx)(L,{filterBlock:e}),R(e)]})},L=({filterBlock:e})=>{if(!e.value?.values||e.value.values.length<1)return null;if(e.provider?.type===_.CH.User){let t=[];for(let l of e.value?.values??[]){let i=l?.avatar?.url??l?.avatarUrl;i&&t.push((0,a.jsx)(T.r,{src:i,size:16,alt:l.displayName??(0,x.I8)(l.value)??""},`${e.provider.key}-${e.id}-avatar-${(0,x.I8)(l.value)}`))}if(t.length>0)return(0,a.jsx)(P.A,{disableExpand:!0,size:16,className:"ValuePlaceholder-module__AvatarStack--yBu0Z",children:t})}if(e.value?.values?.length===1){let t=e.provider?.filterValues?.find(t=>t.value===e.value?.values?.[0]?.value),l=t?.icon;if(l)return(0,a.jsx)(l,{className:"ValuePlaceholder-module__Octicon_0--QpMKs"})}return null};try{G.displayName||(G.displayName="ValuePlaceholder")}catch{}try{L.displayName||(L.displayName="ValuePlaceholderIcon")}catch{}let M=({index:e,filterBlock:t,setFilterValues:l})=>(0,a.jsxs)(k.W,{children:[(0,a.jsx)(k.W.Anchor,{children:(0,a.jsx)(v.Q,{size:"small",className:"BooleanValueSelect-module__Button_0--uEoUf","aria-label":`Value ${e+1}`,trailingVisual:()=>(0,a.jsx)(c.TriangleDownIcon,{className:"BooleanValueSelect-module__Octicon_0--lNGyL"}),...(0,r.G)("afd-row-value-select-boolean-button"),children:(0,a.jsx)(G,{filterBlock:t})})}),(0,a.jsx)(k.W.Overlay,{children:(0,a.jsxs)(N.l,{selectionVariant:"single",...(0,r.G)("afd-row-value-select-list"),children:[(0,a.jsx)(N.l.Item,{onSelect:()=>l(!0),selected:void 0===(0,x.I8)(t.value?.values[0]?.value)||"true"===(0,x.I8)(t.value?.values[0]?.value),children:"True"}),(0,a.jsx)(N.l.Item,{onSelect:()=>l(!1),selected:"false"===(0,x.I8)(t.value?.values[0]?.value),children:"False"})]})})]});try{M.displayName||(M.displayName="BooleanValueSelect")}catch{}let O="ValueSelect-module__TextInput_0--VL4Aa",W="ValueSelect-module__TextInput_1--yo6eh",Q=new Set([_.CH.Select,_.CH.User]),U=new Set([_.CH.Number,_.CH.Date,_.CH.Text]),K=({filterBlock:e,setValuesFilter:t,setFilterValues:l,setFilterFrom:i,setFilterText:s,setFilterTo:u,valueElements:d,index:p,selectedFilteredValues:m})=>{let h,f,[g,y]=(0,o.useState)(!1);(0,o.useEffect)(()=>{g||t("")},[g,t]);let k=(0,o.useMemo)(()=>({renderAnchor:({...t})=>(0,a.jsx)(v.Q,{...t,id:`afd-row-${p}-value`,size:"small",alignContent:"start",disabled:!e.operator,"aria-label":`${R(e)}, Value ${p+1}`,className:(0,n.$)("advanced-filter-item-value","ValueSelect-module__Button_0--Y3h64"),trailingVisual:()=>(0,a.jsx)(c.TriangleDownIcon,{className:"ValueSelect-module__Octicon_0--kj3ir"}),...(0,r.G)("afd-row-value-select-button"),children:(0,a.jsx)("div",{className:"ValueSelect-module__Box_0--YnKLp",children:(0,a.jsx)(G,{filterBlock:e})})}),placeholderText:"Filter values",open:g,onOpenChange:y,items:d,onFilterChange:t,showItemDividers:!1,overlayProps:{width:"small",className:"ValueSelect-module__Overlay--y1G5m"},...(0,r.G)("afd-row-value-select")}),[g,d,t,p,e]);if((h=e.provider?.type)&&Q.has(h))return Array.isArray(m),(0,a.jsx)(D.X,{...k,selected:m,onSelectedChange:l});if(e.provider?.type===_.CH.Boolean)return(0,a.jsx)(M,{index:p,filterBlock:e,setFilterValues:l});if((f=e.provider?.type)&&U.has(f)){let t;if(e.operator===_.tl.Between)return(0,a.jsx)(H,{index:p,fromValue:(0,x.I8)(e.value?.values[0]?.value)??"",toValue:(0,x.I8)(e.value?.values[1]?.value)??"",setFromValue:i,setToValue:u});let l=(t=e.provider?.type)&&t===_.CH.Date?"YYYY-MM-DD":`Enter a ${e.provider?.type.toString().toLowerCase()??"value"}`,n=e.provider?.type===_.CH.Number?"number":"text";return(0,a.jsx)(E.A,{"aria-label":`Value ${p+1}`,size:"small",type:n,value:e.value?.raw,onChange:s,placeholder:l,className:O,...(0,r.G)(`afd-row-${p}`)})}return(0,a.jsx)(E.A,{"aria-label":`Value ${p+1}`,size:"small",value:e.value?.raw,onChange:s,placeholder:"Enter search text",className:O,...(0,r.G)(`afd-row-${p}`)})},H=({index:e,fromValue:t,toValue:l,setFromValue:i,setToValue:s})=>(0,a.jsxs)("div",{className:"ValueSelect-module__Box_1--lHffm",children:[(0,a.jsx)(E.A,{"aria-label":`Value ${e+1} From`,size:"small",value:t,onChange:i,placeholder:"From",className:W,...(0,r.G)(`afd-row-${e}-from`)}),(0,a.jsx)("span",{children:"-"}),(0,a.jsx)(E.A,{"aria-label":`Value ${e+1} To`,size:"small",value:l,onChange:s,placeholder:"To",className:W,...(0,r.G)(`afd-row-${e}-to`)})]});try{K.displayName||(K.displayName="ValueSelect")}catch{}try{H.displayName||(H.displayName="BetweenFilterInputs")}catch{}let z=({index:e,filterBlock:t,filterProviders:l,updateFilterBlock:i,deleteFilterBlock:s})=>{let{config:u}=(0,g.U2)(),{filterQuery:d}=(0,g.g0)(),[c,p]=(0,o.useState)(t.provider?.filterValues??[]),[v,m]=(0,o.useState)(""),[h,f]=(0,o.useState)(t.provider?.options?.filterTypes.multiValue?[]:void 0),k=(0,o.useMemo)(()=>(0,x.sF)(t)?c.filter(e=>!(v.length>0)||(0,$.qA)(v,(0,x.I8)(e.value)??"")||(0,$.qA)(v,e.displayName??"")):[],[t,v,c]),N=(0,o.useMemo)(()=>{let e=Array.from(l);return t.provider&&!l.find(e=>e.key===t.provider?.key)&&e.push(t.provider),e.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0)},[t.provider,l]),b=(0,o.useMemo)(()=>{let e=Array.isArray(h)?[...h]:h?[h]:[];return k?.reduce((e,l)=>{let a=t.provider?.getValueRowProps(l);return -1===(e.findIndex(e=>e.text===a?.text)??-1)&&e.push({...a,leadingVisual:a?.leadingVisual?()=>a.leadingVisual:void 0,trailingVisual:a?.trailingVisual?()=>a.trailingVisual:void 0}),e},e)},[t.provider,k,h]),w=(0,o.useCallback)(e=>{if(e.type!==_.CH.RawText){let l=t.provider?.type===_.CH.RawText&&e.type===_.CH.Text,a=e.type===t.provider?.type||l?t.value:{raw:"",values:[]};i({...t,key:{value:e.key,valid:!0},provider:e,operator:(0,x.nV)(e)[0],value:a})}else{let e=t.provider?.type===_.CH.Text&&t.value?t.value:{raw:"",values:[]};i({...t,key:void 0,provider:y.J,operator:(0,x.nV)(y.J)[0],raw:e.raw,value:e})}},[t,i]),B=(0,o.useCallback)(e=>{let l={};if(t.value&&!j.BP.includes(e)){let e=[];l={value:{values:t.value.values.map(t=>{let l=(0,x.M5)(t.value)?.replace(/^[<>]=?/g,"").replaceAll("..","")??"";return e.push(l),{...t,value:l}})??[],raw:e.join(u.valueDelimiter)}}}i({...t,operator:e,...l})},[u.valueDelimiter,t,i]),A=(0,o.useCallback)(e=>{let l=[];if(void 0===e)l=[];else if("boolean"==typeof e)l=[{value:e.toString(),displayName:(0,x.ZH)(e.toString())}];else if(t.provider?.options?.filterTypes.multiValue&&Array.isArray(e)){let a=t.value?.values.filter(e=>!(0,$.qA)(v,(0,x.I8)(e.value)??"")&&!(0,$.qA)(v,e.displayName??""));for(let t of(a&&(l=a),e)){let e=c.find(e=>e.displayName===t.text||e.value===t.text);e&&l.push(e)}}else{let t=e.text,a=c.find(e=>e.displayName===t||e.value===t);if(void 0===a)return;l=[a]}l=l.filter(e=>e.value.length>0),f("boolean"==typeof e?void 0:e),i({...t,value:{...t.value,raw:l.map(e=>(0,x.I8)(e.value)).join(u.valueDelimiter),values:l.map(e=>({...e,valid:!0}))}})},[u.valueDelimiter,t,i,c,v]),D=(0,o.useCallback)(e=>{let l=[{value:e.target.value,valid:!0},t.value?.values?.[1]??{value:"",valid:!0}],a=`${(0,x.I8)(l[0]?.value)}..${(0,x.I8)(l[1]?.value)}`;i({...t,value:{values:l,raw:a}})},[t,i]),E=(0,o.useCallback)(e=>{let l=[t.value?.values?.[0]??{value:"",valid:!0},{value:e.target.value,valid:!0}],a=`${(0,x.I8)(l[0]?.value)}..${(0,x.I8)(l[1]?.value)}`;i({...t,value:{values:l,raw:a}})},[t,i]),T=(0,o.useCallback)(e=>{i({...t,value:{values:[{value:e.target.value,valid:!0}],raw:e.target.value}})},[t,i]);return(0,o.useEffect)(()=>{(async()=>{if(t.provider){let e=await t.provider.getSuggestions(d,{...t,value:{values:[{value:v,valid:!0}],raw:v}},u);p(e?e.filter(e=>e.type!==_.ak.NoValue&&!e.displayName?.startsWith("Exclude")):[])}})()},[u,t,t.provider,d,v]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("fieldset",{className:(0,n.$)(`advanced-filter-item-${e}`,"AdvancedFilterItem-module__Box_0--o3ROK"),...(0,r.G)("afd-filter-row"),children:[(0,a.jsx)("legend",{className:"AdvancedFilterItem-module__Box_1--NB2mp",children:(0,a.jsx)("h2",{children:`Row ${e+1}`})}),(0,a.jsx)("span",{className:"AdvancedFilterItem-module__Text_0--lWMLq",children:e+1}),(0,a.jsxs)("div",{className:"AdvancedFilterItem-module__Box_2--Q0Tih",children:[(0,a.jsxs)("div",{className:"AdvancedFilterItem-module__Box_3--ZXaEB",children:[(0,a.jsxs)("div",{className:C,children:[(0,a.jsx)("span",{className:I,children:"Qualifier"}),(0,a.jsx)(S,{filterBlock:t,index:e,filterProviders:N,setFilterProvider:w})]}),(0,a.jsxs)("div",{className:C,children:[(0,a.jsx)("span",{className:I,children:"Operator"}),(0,a.jsx)(F,{setFilterOperator:B,filterBlock:t,index:e})]}),(0,a.jsxs)("div",{className:C,children:[(0,a.jsx)("span",{className:I,children:"Value"}),(0,a.jsx)(K,{filterBlock:t,index:e,setValuesFilter:m,valueElements:b,selectedFilteredValues:h,setFilterValues:A,setFilterFrom:D,setFilterText:T,setFilterTo:E})]}),(0,a.jsx)(V,{onClick:()=>s(e),ariaLabel:`Delete filter ${e+1}: ${t.provider?.displayName??t.provider?.key}, ${t.operator}, ${t.value?.raw}`,testId:`afd-filter-row-delete-${e}`,className:"AdvancedFilterItem-module__RemoveFilterButton_0--LSbzV"})]}),(0,a.jsxs)("div",{className:"AdvancedFilterItem-module__Box_5--glbQv",children:[(0,a.jsx)("div",{children:(0,a.jsx)(V,{onClick:()=>s(e),ariaLabel:`Delete filter ${e+1}: ${t.provider?.displayName??t.provider?.key}, ${t.operator}, ${t.value?.raw}`})}),(0,a.jsx)("div",{className:"AdvancedFilterItem-module__Box_6--Di1xh",children:e+1})]})]})]}),(0,a.jsx)("div",{className:"AdvancedFilterItem-module__Box_7--ITx8B",children:(0,a.jsx)("div",{className:"AdvancedFilterItem-module__Box_8--ZFxkN"})})]})};try{z.displayName||(z.displayName="AdvancedFilterItem")}catch{}let q="FilterList-module__Box_3--Mtxgk",X=({filterBlocks:e,filterProviders:t,updateFilterBlock:l,deleteFilterBlock:i,isNarrowBreakpoint:r,addFilterButtonMobileLastRowRef:s,addNewFilterBlock:n})=>(0,a.jsxs)("div",{className:"FilterList-module__Box_0--Euc9x",children:[(0,a.jsxs)("div",{className:"FilterList-module__Box_1--L1FmT",children:[(0,a.jsx)("div",{className:"FilterList-module__Box_2--opwy0"}),(0,a.jsx)("div",{className:q}),(0,a.jsx)("span",{className:q,children:"Qualifier"}),(0,a.jsx)("span",{className:"FilterList-module__Text_0--TOaPe",children:"Operator"}),(0,a.jsx)("span",{className:q,children:"Value"}),(0,a.jsx)("div",{})]}),e.map((e,r)=>(0,a.jsx)(z,{filterBlock:e,filterProviders:t,updateFilterBlock:l,index:r,deleteFilterBlock:i},`advanced-filter-item-${r}`)),(0,a.jsx)("div",{className:"FilterList-module__Box_4--PWgFu",children:(0,a.jsx)(b,{size:r?"medium":"small",ref:s,filterProviders:t,addNewFilterBlock:n})})]});try{X.displayName||(X.displayName="FilterList")}catch{}let Z=(0,h.A)(e=>(t,l)=>l.map(t=>{let l=(0,x.n$)(t,e);return t.raw===l?t:{...t,raw:l}})),Y=({filterButtonVariant:e="normal",isStandalone:t=!1,dialogOpen:l,setDialogOpen:i})=>{let{config:h}=(0,g.U2)(),{filterQuery:k,filterProviders:N,updateFilter:$}=(0,g.g0)(),{hideSuggestions:j}=(0,g.Pt)(),C=(0,o.useRef)(null),{sendClickAnalyticsEvent:I}=(0,d.S)(),F=(0,o.useRef)(null),B=(0,o.useRef)(null),S=(0,o.useRef)(null),A=(0,s.tv)({regular:!1,narrow:!0},!1),V=(0,x.vU)(k.blocks),D=Z(h),[E,T]=(0,o.useReducer)(D,V),[P,R]=(0,o.useState)(!1),G=(0,p.S)(),L=(0,o.useCallback)(async()=>!P||await G({...f.D.advancedFilterDialogCloseConfirmation,confirmButtonType:"danger"}),[G,P]),M=(0,o.useMemo)(()=>{let e=Object.values(N).filter(e=>(e.options.filterTypes.multiKey||E.filter(t=>(0,x.sF)(t)&&t.provider?.key===e.key).length<1)&&e.options.support.status===_.b9.Supported);return h.disableAdvancedTextFilter&&"button"===h.variant||e.push(y.J),e.sort((e,t)=>e.key?.localeCompare(t.displayName??"")??0)},[h.disableAdvancedTextFilter,h.variant,E,N]),O=(0,o.useCallback)(()=>{T(V),R(!1)},[V]),W=(0,o.useCallback)(e=>{T([...E,{id:E.length,type:_._B.Filter,provider:e,key:(0,x.Nn)(e),operator:(0,x.nV)(e)[0],value:{raw:"",values:[{value:"",valid:!0}]}}]),R(!0),setTimeout(()=>{let e=document.querySelectorAll(".advanced-filter-item-qualifier");e[e.length-1]?.focus()},10)},[E]),Q=(0,o.useCallback)(e=>{R(!0),T(E.map(t=>t.id===e.id?e:t))},[E]),U=(0,o.useCallback)(e=>{let t,l=E.filter((t,l)=>l!==e);T(l.map((e,t)=>({...e,id:t}))),t=A?l.length>0?S:B:F,setTimeout(()=>t.current?.focus(),20)},[E,A]),K=t?"button_only":"button_and_input",H=(0,o.useCallback)(()=>{O(),j(),i(!0),I({action:"open_advanced_filter_dialog",label:`variant:${K}`})},[j,O,i,I,K]),z=(0,o.useCallback)(async e=>{(e||await L())&&(i(!1),O(),setTimeout(()=>{C.current?.focus()},20))},[L,i,O]),q=(0,o.useCallback)(e=>{let t=e.filtersUsed.length>0?e.filtersUsed.join(","):"";I({action:"submit_filter_query",label:`variant:${K};event_type:${_.FT.DialogSubmit};used_filter_providers:${t};nested_group_depth:${e.nestedGroupCount};submitted_by:filter_dialog`})},[I,K]),Y=(0,o.useCallback)(async()=>{let e=E.map(({raw:e})=>e).join(" ");$(e,e.length,q,_.FT.DialogSubmit),await z(!0)},[z,E,q,$]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Q,{ref:C,onClick:H,...(0,r.G)("advanced-filter-button"),"aria-label":"Advanced filter dialog",leadingVisual:c.FilterIcon,count:k.filterCount>0?k.filterCount:void 0,className:(0,n.$)("AdvancedFilterDialog-module__Button_0--ALGQW",t&&"AdvancedFilterDialog-module__standaloneButton--NpFns"),children:"normal"===e&&"Filter"}),l&&(0,a.jsx)(m.l,{onClose:()=>z(),role:"dialog",title:"Advanced filters",position:{narrow:"fullscreen",regular:"center"},renderFooter:()=>(0,a.jsxs)("div",{className:"AdvancedFilterDialog-module__Box_0--C7Ow5",children:[(0,a.jsx)("div",{className:"AdvancedFilterDialog-module__Box_1--mCGuT",children:(0,a.jsx)(b,{size:A?"medium":"small",ref:F,filterProviders:M,addNewFilterBlock:W})}),(0,a.jsxs)("div",{className:"AdvancedFilterDialog-module__Box_2--LUI_c",children:[(0,a.jsx)(v.Q,{size:A?"medium":"small",onClick:()=>z(),...(0,r.G)("afd-cancel"),children:"Cancel"}),(0,a.jsx)(v.Q,{size:A?"medium":"small",variant:"primary",onClick:Y,...(0,r.G)("afd-apply"),children:"Apply"})]})]}),renderBody:()=>(0,a.jsxs)("div",{className:(0,n.$)("advanced-filter-dialog-content","AdvancedFilterDialog-module__Box_4--S0u2W",E.length&&"AdvancedFilterDialog-module__nonEmpty--AchtU"),...(0,r.G)("advanced-filter-dialog-content"),children:[(0,u.G7)("primer_react_unified_portal_root")?null:(0,a.jsx)("div",{id:"__primerPortalRoot__",style:{zIndex:10,position:"absolute",width:"100%"}}),(0,a.jsxs)("div",{className:"AdvancedFilterDialog-module__Box_3--tyDch",children:[E.length<1&&(0,a.jsx)(w,{isNarrowBreakpoint:A,addFilterButtonMobileRef:B,filterProviders:M,addNewFilterBlock:W}),E.length>0&&(0,a.jsx)(X,{addFilterButtonMobileLastRowRef:S,addNewFilterBlock:W,deleteFilterBlock:U,filterBlocks:E,filterProviders:M,isNarrowBreakpoint:A,updateFilterBlock:Q})]})]})})]})};try{Y.displayName||(Y.displayName="AdvancedFilterDialog")}catch{}let J=(0,o.memo)(()=>{let{suspendFocus:e}=(0,g.Ge)(),{rawFilterRef:t,clearFilter:l}=(0,g.g0)();if(t?.current.length!==0)return(0,a.jsx)(A.K,{...(0,r.G)("filter-clear-query"),as:"button",className:"ClearButton-module__clearButton--QMTmN","aria-label":"Clear filter",onMouseDown:t=>e(t.currentTarget),onKeyDown:t=>e(t.currentTarget),onClick:()=>l(),icon:c.XCircleFillIcon,variant:"invisible",size:"small"})});J.displayName="ClearButton";var ee=l(33727),et=l(44398),el=l(95104);let ea=()=>(0,a.jsx)("div",{className:"FilterInputIcon-module__Box_0--_fTmo",children:(0,a.jsx)(c.SearchIcon,{"aria-label":"Search",className:"FilterInputIcon-module__Octicon_0--I6ARH"})});try{ea.displayName||(ea.displayName="FilterInputIcon")}catch{}let ei=({children:e,isStandalone:t=!1})=>t?(0,a.jsx)("div",{...(0,r.G)("filter-bar"),className:"FilterInputWrapper-module__Box_0--mL7TM",children:e}):(0,a.jsx)("div",{...(0,r.G)("filter-bar"),className:"FilterInputWrapper-module__Box_1--kGZnc",children:e});try{ei.displayName||(ei.displayName="FilterInputWrapper")}catch{}var er=l(88431);let es=({text:e})=>(0,a.jsx)("span",{className:"text-block",children:e}),en=({text:e})=>(0,a.jsx)("span",{className:"delimiter space-delimiter",children:e}),eo=({delimiter:e})=>(0,a.jsx)("span",{className:"delimiter",children:e}),eu=({keyword:e})=>(0,a.jsx)("span",{className:(0,n.$)("keyword-block","StyledInputBlocks-module__Text_0--EYQ9u"),children:e}),ed=({text:e,className:t})=>(0,a.jsx)("span",{"data-type":"filter",className:t,children:e});try{es.displayName||(es.displayName="TextBlock")}catch{}try{en.displayName||(en.displayName="SpaceBlock")}catch{}try{eo.displayName||(eo.displayName="Delimiter")}catch{}try{eu.displayName||(eu.displayName="KeywordBlock")}catch{}try{ed.displayName||(ed.displayName="KeyBlock")}catch{}let ec=[_.tl.GreaterThan,_.tl.LessThan,_.tl.Before,_.tl.After],ep=[_.tl.GreaterThanOrEqualTo,_.tl.LessThanOrEqualTo,_.tl.BeforeAndIncluding,_.tl.AfterAndIncluding],ev=()=>{let{config:e}=(0,g.U2)(),{inputFocused:t,updateStyledInputBlockCount:l}=(0,g.Ge)(),{rawFilterRef:i,filterQuery:r}=(0,g.g0)(),s=(0,o.useRef)([]),u=(e,l,i,s)=>{let{id:o,key:u,operator:d}=e,{value:c,valid:p}=l;if(p){let e=0;ec.includes(d)?e=1:ep.includes(d)&&(e=2);let t=(0,x.I8)(c)?.charAt(e);return t&&j.wO.includes(t)?(0,a.jsx)("span",{"data-type":"filter-value",className:(0,n.$)("valid-filter-value","StyledInput-module__Box_0--wGp5d"),children:(0,x.I8)(c)},`filter-block-${i}-${u.value}-${s?`${s}-`:""}${(0,x.I8)(c)}`):(0,a.jsx)("span",{"data-type":"filter-value",className:(0,n.$)("valid-filter-value","StyledInput-module__Box_1--WBhEL"),children:(0,x.I8)(c)},`filter-block-${i}-${u.value}-${s?`${s}-`:""}${(0,x.I8)(c)}`)}return void 0===p||(!1!==p||r.activeBlock?.id===o)&&t?(0,a.jsx)("span",{"data-type":"filter-value",children:(0,x.I8)(c)},`filter-block-${i}-${u.value}-${s?`${s}-`:""}${(0,x.I8)(c)}`):(0,a.jsx)("span",{"data-type":"filter-value",className:(0,n.$)("invalid-filter-value","StyledInput-module__Box_2--h5s9e"),children:(0,x.I8)(c)},`filter-block-${i}-${u.value}-${s?`${s}-`:""}${(0,x.I8)(c)}`)},d=(0,o.useMemo)(()=>{let l=[];return(0,x.Ed)(r,i?.current)?(!function i(s,o){for(let[d,c]of s.entries()){let s;if((0,x.aK)(c)){let{key:l,operator:i,value:p}=c,v=!1===l.valid&&(r.activeBlock?.id!==c.id||!t),m=(0,a.jsx)(ed,{text:l.value,className:(0,n.$)(v&&"StyledInput-module__KeyBlock_0--Ucg7o")},`filter-block-${d}-key`),h=(0,a.jsx)(eo,{delimiter:e.filterDelimiter},`filter-block-${d}-delimiter`),f=[];if(i===_.tl.Between){let e=p.values[0],t=p.values[1];e&&f.push(u(c,e,d,1)),f.push((0,a.jsx)("span",{className:"delimiter",children:".."},`filter-block-${d}-${l.value}-delimiter-1`)),t&&f.push(u(c,t,d,2))}else f=p.values.map((t,i)=>(0,a.jsxs)("span",{children:[i>0&&(0,a.jsx)("span",{className:"delimiter",children:e.valueDelimiter},`filter-block-${d}-${l.value}-delimiter-${i}`),u(c,t,d)]},`filter-block-${d}-${l.value}-values-${i}}`));s=(0,a.jsxs)("span",{"data-type":"filter-expression",children:[m,h,f]},`filter-block-${o}-${d}-${l.value}`)}else c.type===_._B.Space?s=(0,a.jsx)(en,{text:c.raw},`space-block-${o}-${d}`):c.type===_._B.Keyword?s=(0,a.jsx)(eu,{keyword:c.raw},`keyword-block-${o}-${d}`):(0,x.W9)(c)?(l.push((0,a.jsx)(es,{text:"("},`text-open-${o}-${d}`)),i(c.blocks,o?`${o}-${d}`:`${d}`),l.push((0,a.jsx)(es,{text:")"},`text-close-${o}-${d}`))):s=(0,a.jsx)(es,{text:c.raw},`text-block-${o}-${d}`);l.push(s)}}(r.blocks,"root"),s.current=l,l):s.current},[r.raw,r.blocks,r.activeBlock,r.isValidated,t,e.filterDelimiter,e.valueDelimiter]);return(0,o.useEffect)(()=>{l(d.length)},[d.length,l]),(0,a.jsx)(a.Fragment,{children:d})};try{ev.displayName||(ev.displayName="StyledInput")}catch{}let em=({id:e,hasValidationMessage:t=!1,placeholder:l="Search or filter",onKeyDown:i})=>{let{suggestionsVisible:s,activeSuggestion:u,suggestionGroups:d}=(0,g.Pt)(),{caretRef:c,inputFocused:p,inputKeyDown:v,inputOnBlur:m,inputOnCompositionStart:h,inputOnCompositionEnd:f,inputOnChange:y,inputOnFocus:_,inputRef:x,inputSelectionEnd:k,inputSelectionStart:N,inputValue:b,updateInputSelection:w}=(0,g.Ge)(),$=(0,o.useRef)(null),[j,C]=(0,o.useState)(0),I=(0,o.useRef)(null),F=(0,o.useCallback)(e=>{w(e.selectionStart??0,e.selectionEnd??0)},[w]),B=(0,o.useCallback)(e=>{F(e.currentTarget),v(e),i?.(e)},[F,v,i]),S=(0,o.useCallback)(e=>{F(e.currentTarget)},[F]),A=(0,o.useMemo)(()=>{let e=Math.max(($.current?.scrollWidth??0)+2,ee.$_);return`${e}px`},[N,$.current?.scrollWidth,b]);(0,er.N)(()=>{let e=c.current,t=I.current;e&&t&&(e.offsetLeft<j?C(e.offsetLeft-t.clientWidth-ee.$_):e.offsetLeft>j+t.clientWidth?C(e.offsetLeft-t.clientWidth+ee.$_):t.scrollLeft=j)},[c,j,N,b]);let V=(0,o.useMemo)(()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:N?b.substring(0,N):b}),(0,a.jsx)("span",{...(0,r.G)("filter-cursor"),ref:c}),(0,a.jsx)("span",{children:N?b.substring(N):null})]}),[c,N,b]),D=(0,o.useMemo)(()=>s&&d.some(e=>e.suggestions.length>0),[d,s]);return(0,o.useEffect)(()=>{x.current&&N>-1&&p&&(x.current.selectionStart=N,x.current.selectionEnd=k)},[x,N,k,b]),(0,a.jsxs)("div",{...(0,r.G)("styled-input-container"),ref:I,tabIndex:-1,className:(0,n.$)("styled-input-container","Input-module__Box_0--oLwwo"),children:[(0,a.jsx)("div",{...(0,r.G)("styled-input-content"),"aria-hidden":"true",className:(0,n.$)("styled-input-content","Input-module__Box_1--NowmF"),children:(0,a.jsx)(ev,{})}),(0,a.jsxs)("div",{...(0,r.G)("filter-input-wrapper"),className:"Input-module__Box_2--rBUW0",children:[(0,a.jsx)("div",{...(0,r.G)("filter-sizer"),ref:$,"aria-hidden":"true",className:"Input-module__Box_3--fXfMg",children:V}),(0,a.jsx)("input",{id:`${e}-input`,role:"combobox","aria-expanded":D,"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":`${e}-results`,"aria-activedescendant":null!==u&&-1!==u&&s?`suggestion-${u}`:void 0,"aria-describedby":t?`${e}-validation-message`:"",placeholder:l,ref:x,value:b,onFocus:_,onBlur:m,onCompositionStart:h,onCompositionEnd:f,onKeyDown:B,onClick:S,onChange:y,name:`${e}-inputname`,autoComplete:"off",spellCheck:"false",style:{width:A},className:"Input-module__Box_4--DZrl_",...(0,r.G)("filter-input")})]})]})};try{em.displayName||(em.displayName="Input")}catch{}let eh=()=>{let{onSubmit:e}=(0,g.g0)();return(0,a.jsx)(A.K,{"aria-label":"Search",size:"medium",icon:c.SearchIcon,variant:"default",onClick:()=>{e(_.FT.ExplicitSubmit,"input_with_button")},className:"SubmitButton-module__IconButton_0--tFya7"})};try{eh.displayName||(eh.displayName="SubmitButton")}catch{}var ef=l(81945),eg=l(73017);let ey=e=>{let{suggestionId:t,active:l,icon:i,iconColor:r,value:s,avatar:u,displayName:d,displayNameHtml:c,ariaLabel:p}=e,{suggestionSelected:v,activeSuggestionRef:m}=(0,g.Pt)(),{inputRef:h}=(0,g.Ge)(),f=(0,o.useCallback)(()=>{v(e),h.current?.focus()},[h,e,v]),y=(0,o.useCallback)(e=>{l&&e?(m.current=e,e.scrollIntoView({block:"nearest"})):m.current=null},[l,m]),_=(0,n.$)("SuggestionItem-module__displayName--Re_u9",e.description?"SuggestionItem-module__boldText--bEf90":"SuggestionItem-module__normalText--mbwZZ");return(0,a.jsxs)(N.l.Item,{id:`suggestion-${t}`,onSelect:f,active:l,role:"option","aria-label":p,"aria-selected":l,tabIndex:-1,"aria-labelledby":void 0,ref:y,className:"SuggestionItem-module__item--iOkfw",children:[(i||r||u)&&(0,a.jsx)(N.l.LeadingVisual,{children:(0,a.jsxs)("div",{className:"SuggestionItem-module__Box_0--KiyIM",children:[i?(0,a.jsx)(i,{fill:r??"currentcolor"}):r?(0,a.jsx)("div",{style:{backgroundColor:r},className:"SuggestionItem-module__Box_1--nJzVb"}):null,u&&(0,a.jsx)(T.r,{src:u.url,alt:(0,x.I8)(s)??"User Avatar",square:!1,className:"SuggestionItem-module__GitHubAvatar_0--G3syG"})]})}),void 0!==c?(0,a.jsx)(eg.JR,{html:c,className:_}):(0,a.jsx)("span",{className:_,children:d??(0,x.I8)(s)??""}),e.description&&void 0!==e.inlineDescription&&(0,a.jsx)(N.l.Description,{variant:e.inlineDescription?"inline":"block",className:"SuggestionItem-module__ActionList_Description--iWGYh",truncate:!!e.inlineDescription,children:e.description})]})};try{ey.displayName||(ey.displayName="SuggestionItem")}catch{}let e_=({id:e})=>{let{id:t}=(0,g.U2)();e=e??t;let{suggestionsListRef:l,activeSuggestion:i,isFetchingSuggestions:s,position:u,suggestionGroups:d,suggestionsVisible:c}=(0,g.Pt)(),{suspendFocus:p}=(0,g.Ge)(),v=(e,t="wave")=>(0,a.jsxs)("div",{className:"SuggestionsList-module__Box_0--k5Rtb",children:[(0,a.jsx)(ef.O,{variant:"elliptical",width:"20px",height:"20px",animationStyle:t}),(0,a.jsx)(ef.O,{variant:"rounded",width:"random",height:"16px",animationStyle:t})]},e),m=(0,o.useMemo)(()=>(0,a.jsx)("div",{children:Array(8).fill(1).map((e,t)=>v(`loading-skeleton-${t}`))}),[]),h=(0,o.useMemo)(()=>v("prefetched-loading-skeleton","pulse"),[]),f=c&&d.some(e=>e.suggestions.length>0)||s,y=(0,o.useMemo)(()=>{let e=-1,t=[];return d.map((l,s)=>{l.suggestions.length>0&&(t.push((0,a.jsxs)(N.l.Group,{children:[l.title&&(0,a.jsx)(N.l.GroupHeading,{...(0,r.G)("suggestions-heading"),"aria-hidden":"true",children:l.title}),l.suggestions.map(t=>(e++,(0,a.jsx)(ey,{...t,suggestionId:e,active:e===i},(0,x.W5)("suggestion",t.id,`${(0,x.I8)(t.value)}-${t.displayName}-${t.description}`))))]},(0,x.W5)("group",l.id))),s++<d.length-1&&(d[s++]?.suggestions??[]).length>0&&t.push((0,a.jsx)(N.l.Divider,{},(0,x.W5)("divider",l.id))))}),t},[i,d]);return(0,a.jsx)("div",{className:"SuggestionsList-module__Box_1--y4zR5",...(0,r.G)("backdrop-anchor"),children:(0,a.jsx)("div",{id:`${e}-suggestions`,ref:l,className:(0,n.$)("SuggestionsList-module__Box_3--ePaD1",f&&"SuggestionsList-module__showOverlay--JOtrH"),style:{left:`${u?u.left:0}px`},children:(0,a.jsxs)(N.l,{...(0,r.G)("filter-results"),"aria-label":s?"Loading Suggestions":"Suggestions",role:"listbox",id:`${e}-results`,className:"SuggestionsList-module__ActionList_0--ncKNB",onMouseDown:e=>p(e.currentTarget),children:[f&&d.some(e=>e.suggestions.length>0)&&y,f&&s&&(0,a.jsx)("div",{children:d.some(e=>e.suggestions.length>0)?h:m})]})})})};try{e_.displayName||(e_.displayName="SuggestionsList")}catch{}var ex=l(4559),ek=l(20263),eN=l(84078);let eb=({id:e,messages:t})=>{let{sendAnalyticsEvent:l}=(0,d.s)();return((0,o.useEffect)(()=>{if(t&&t.length>0){let e=t.map(e=>e.replaceAll(/<pre>|<\/pre>/g,"'")).join(". ").trim(),a=`${f.D.filterInvalid(t.length)} ${e}.`;(0,ex.i)(a),l("filter.validation_errors","FILTER_VALIDATION_ERRORS",{messages:e})}},[l,t]),!t||t.length<1)?null:(0,a.jsxs)(eN.l,{id:e,variant:"warning",className:"ValidationMessage-module__Banner--jebmm",children:[(0,a.jsx)(eN.l.Title,{children:(0,a.jsx)("span",{...(0,r.G)("validation-error-count"),children:f.D.filterInvalid(t.length)})}),(0,a.jsx)("div",{className:"ValidationMessage-module__Box_0--FLFiZ",children:(0,a.jsx)("ul",{className:"ValidationMessage-module__Box_2--eF4ro",...(0,r.G)("validation-error-list"),children:t.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(ek.BC,{html:e,domPurifyConfig:{ALLOWED_TAGS:["pre"],ALLOWED_ATTR:[],ALLOW_DATA_ATTR:!1},className:"ValidationMessage-module__VerifiedHTMLBox_0--CKne7"})},e.replaceAll(" ","-")))})})]})};try{eb.displayName||(eb.displayName="ValidationMessage")}catch{}var ew=l(84268);let e$=({className:e,as:t,onClick:l,href:i})=>(0,a.jsxs)(ew.A,{...(0,r.G)("filter-revert-query"),as:t||"a",href:i,onClick:l,className:(0,n.$)(e,"FilterRevert-module__Link_0--ykkkc"),children:[(0,a.jsx)(c.UndoIcon,{className:"FilterRevert-module__Octicon_0--kGCqF"}),"Revert filter changes"]});try{e$.displayName||(e$.displayName="FilterRevert")}catch{}let ej=new el.N,eC=({advancedFilterDialogRef:e,className:t,context:l,customParser:i,"data-testid":u,filterButtonVariant:d="normal",filterValue:c,id:p,initialFilterValue:v,inputRef:m,label:h,onChange:f,onParse:g,onSubmit:y,onKeyDown:_,onValidation:x,placeholder:k,providers:N,settings:b,showClearButton:w=!0,showValidationMessage:$=!0,trailingVisual:j,variant:C="full",visuallyHideLabel:I=!0})=>{let[F,B]=(0,o.useState)([]),S=$&&F.length>0,A=(0,o.useCallback)((e=[],t=ej)=>{JSON.stringify(F)!==JSON.stringify(e)&&B(e),x?.(e,t)},[x,F]),V=(0,s.tv)({regular:d,narrow:"button"===C?"normal":"compact"},d),D="string"==typeof c,[E,T]=(0,o.useState)(v||""),P=(0,o.useCallback)(e=>{D||T(e),f?.(e)},[D,f]),R="input"===C&&!y||"input"!==C&&!y,[G,L]=(0,o.useState)(!1);return(0,o.useImperativeHandle)(e,()=>({isAdvancedFilterDialogOpen:G,toggleAdvancedFilterDialog:e=>L(e??!G)}),[G]),(0,a.jsx)(et.dv,{context:l,customParser:i,inputRef:m,rawFilter:D?c:E,onChange:P,onParse:g,onSubmit:y,onValidation:A,providers:N,settings:{...ee.Fy,...b},variant:C,children:(0,a.jsxs)("div",{id:p,role:"form",className:(0,n.$)("FormControl FormControl--fullWidth",t,"Filter-module__Box_1--Tymy6"),...(0,r.G)(u??"filter"),children:[(0,a.jsx)("label",{id:`${p}-label`,htmlFor:`${p}-input`,className:`FormControl-label ${I?"sr-only":""}`,...(0,r.G)("filter-bar-label"),children:h}),(0,a.jsxs)("div",{className:"Filter-module__Box_0--kbMb2",children:[(0,a.jsxs)(ei,{isStandalone:"button"===C,children:["input"!==C&&(0,a.jsx)(Y,{isStandalone:"button"===C,filterButtonVariant:V,dialogOpen:G,setDialogOpen:L}),"button"!==C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,n.$)("Filter-module__Box_2--wp5NN","input"===C&&"Filter-module__leftRounded--Bf0z4",R&&"Filter-module__rightRounded--_sTZF",y&&"Filter-module__hasSubmit--ucsOC"),children:[!y&&(0,a.jsx)(ea,{}),(0,a.jsx)(em,{id:p,placeholder:k,onKeyDown:_,hasValidationMessage:S}),j&&(0,a.jsx)("div",{className:"Filter-module__trailingVisual--stqAE",children:j}),w&&(0,a.jsx)(J,{})]}),y&&(0,a.jsx)(eh,{})]})]}),(0,a.jsx)(e_,{id:p}),$&&(0,a.jsx)(eb,{messages:F,id:`${p}-validation-message`})]})]})})};eC.displayName="FilterInternal";let eI={},eF=e=>(0,a.jsx)(i.y,{appName:"shared_components",category:"filter",metadata:eI,children:(0,a.jsx)(eC,{...e})});eF.displayName="Filter"},95104:(e,t,l)=>{l.d(t,{N:()=>FilterQuery});var a=l(35750),i=l(18150),r=l(85242),s=l(88243),n=l(16213),o=l(50467),u=l(59403),d=l(91385),c=l(33727),p=l(39295),v=l(19459),m=l(65154),h=l(55461),f=new WeakMap,g=new WeakMap,y=new WeakMap,_=new WeakMap,x=new WeakMap,k=new WeakMap,N=new WeakMap,b=new WeakSet,w=new WeakSet;let FilterQuery=class FilterQuery{get activeBlock(){return(0,a._)(this,f)}get activeBlockId(){return(0,a._)(this,f)?.id??-1}get blocks(){return(0,a._)(this,g)}clearActiveBlock(){(0,r._)(this,f,void 0)}get context(){let e={...(0,a._)(this,y)??{},...(0,a._)(this,_)??{}};if(!(0,a._)(this,y)?.repo){let t=(0,a._)(this,g).filter(e=>(0,h.aK)(e)&&"repo"===e.provider.key).map(e=>e.value.values.map(e=>!1!==e.valid?(0,h.M5)(e.value)??"":"")).flat();if(t.length>0&&(e.repo=t.join(",")),!(0,a._)(this,y)?.org){let t=(0,a._)(this,g).filter(e=>(0,h.aK)(e)&&"org"===e.provider.key).map(e=>e.value.values.map(e=>!1!==e.valid?(0,h.M5)(e.value)??"":"")).flat();t.length>0&&(e.org=t.join(","))}}return e}get contextURLParams(){return new URLSearchParams(this.context)}get errors(){return(0,a._)(this,x)?Array.from((0,a._)(this,x)):[]}getErrors(e=!1){return e?[...(0,a._)(this,x),...(0,a._)(this,k)]:(0,a._)(this,x)}get filterCount(){if(!this.isValidated||!(0,h.Ed)(this))return this.cachedFilterCount;let e=this.blocks.filter(e=>(0,h.aK)(e)&&e.value.values.some(e=>e.valid)).length;return this.cachedFilterCount=e,e}get filtersUsed(){if(!(0,h.Ed)(this))return this.cachedFiltersUsed;let e=(0,h.wR)(this.blocks).filter(e=>(0,h.aK)(e)).map(e=>e.provider?.key);return this.cachedFiltersUsed=e,e}get instanceContext(){return{cachedFilterCount:this.cachedFilterCount,cachedFiltersUsed:this.cachedFiltersUsed,cachedNestedGroupCount:this.cachedNestedGroupCount,staticContext:(0,a._)(this,y)}}get nestedGroupCount(){if(!(0,h.Ed)(this))return this.cachedNestedGroupCount;let e=(0,h.wR)(this.blocks).filter(e=>(0,h.W9)(e)).reduce((e,t)=>Math.max(e,t.groupDepth||0),0);return this.cachedNestedGroupCount=e,e}get raw(){return(0,a._)(this,N)}get staticContext(){return(0,a._)(this,y)}set staticContext(e){(0,r._)(this,y,e)}set additionalParams(e){(0,r._)(this,_,e)}addQueryParam(e,t){(0,a._)(this,_)||(0,r._)(this,_,{}),(0,a._)(this,_)[e]=t}async getSuggestions(e,t,l){let a=this.activeBlock,i=[];if(!a&&""===this.raw||a?.type===m._B.Space||a?.type===m._B.UnmatchedOpenParen||a?.type===m._B.Group&&(a?.raw.endsWith("(")||a?.raw==="()")){i=[{id:"providers-suggestion-group",suggestions:Object.values(t).filter(e=>(0,s._)(this,b,$).call(this,e)&&e.options.support.status===m.b9.Supported).filter(e=>e.priority<=p.$D).sort((e,t)=>e.priority-t.priority).map(e=>({type:m.ak.Key,displayName:e.displayName,ariaLabel:`${e.displayName}, Filter${e.description?`, ${e.description}`:""}`,priority:e.priority,icon:e.icon,value:e.key}))}];let e=[];l.groupAndKeywordSupport&&(e.push((0,h.PU)()),e.push((0,h.j1)()));let a=e=>!0===e.options.filterTypes.exclusive&&(0,s._)(this,b,$).call(this,e);Object.values(t).filter(a).length>0&&e.push((0,h.m1)()),i.push({id:"utility-suggestion-group",suggestions:e})}else if(a?.type===m._B.Text&&"-"===a.raw){let e=Object.values(t).filter(e=>e.options.filterTypes.exclusive&&(0,s._)(this,b,$).call(this,e)&&e.options.support.status===m.b9.Supported).filter(e=>e.priority<=p.$D).sort((e,t)=>e.priority-t.priority).map(e=>({type:m.ak.Key,displayName:e.displayName,ariaLabel:`${e.displayName}, Filter${e.description?`, ${e.description}`:""}`,priority:e.priority,icon:e.icon,value:`-${e.key}`}));i=[{id:"exclude-providers",title:v.D.exclude,suggestions:e}]}else if(a?.type===m._B.Text){let r=[],n=(0,h.ON)(a)?a:null,o=n&&e-n.startIndex<=n.raw.indexOf(l.filterDelimiter)?n.raw.substring(0,e-n.startIndex):a.raw;Object.values(t).map(e=>{if(((0,h.kZ)(e,o,!0)||e.displayName&&e.displayName.startsWith(o))&&(0,s._)(this,b,$).call(this,e)&&e.options.support.status===m.b9.Supported){let t=e.key;t===o&&t.endsWith(".")||(a.raw.startsWith("-")&&e.options.filterTypes.exclusive&&(t=`-${e.key}`),r.push({type:m.ak.Key,displayName:e.displayName,ariaLabel:`${e.displayName}, Filter${e.description?`, ${e.description}`:""}`,priority:e.priority-(0,u.dt)(o,e.key),icon:e.icon,value:t}))}}),r.sort((e,t)=>e.priority-t.priority),i=[{id:"providers-suggestion-group",suggestions:r}];let d=[];l.groupAndKeywordSupport&&("and".startsWith(o.toLocaleLowerCase())&&d.push((0,h.PU)()),"or".startsWith(o.toLocaleLowerCase())&&d.push((0,h.j1)())),i.push({id:"utility-suggestion-group",suggestions:d})}else if((0,h.aK)(a)){let r=[],n=(0,h.Xz)(a.key.value);if((0,h.v7)(a)){let[o,c]=(0,h.t4)(a,e);if("key"===o){let e=[];Object.values(t).map(t=>{((0,d.qA)(c.value,t.key)||t.options.filterTypes.exclusive&&(0,d.qA)(c.value,`-${t.key}`))&&(0,s._)(this,b,$).call(this,t)&&e.push({type:m.ak.Key,displayName:t.displayName,ariaLabel:`${t.displayName}, Filter${t.description?`, ${t.description}`:""}`,priority:t.priority-(0,u.dt)(c.value,t.key),icon:t.icon,value:t.key})}),e.sort((e,t)=>e.priority-t.priority),i=[{id:"providers-suggestion-group",suggestions:e}]}else if("value"===o){let i=Object.values(t).find(e=>(0,h.kZ)(e,n)),s=await i?.getSuggestions(this,a,l,e);r=s?.filter(e=>0>a.value.values.findIndex(t=>(0,h.M5)(t.value)===e.value&&!t.hasCaret)).sort((e,t)=>e.priority-t.priority)??[]}}i=[{id:"values-suggestion-group",suggestions:r}]}return i}constructor(e="",t=[],l,a,u,d=!1){(0,n._)(this,b),(0,n._)(this,w),(0,o._)(this,"cachedFilterCount",0),(0,o._)(this,"cachedFiltersUsed",[]),(0,o._)(this,"cachedNestedGroupCount",0),(0,o._)(this,"config",void 0),(0,o._)(this,"isValidated",!1),(0,i._)(this,f,{writable:!0,value:void 0}),(0,i._)(this,g,{writable:!0,value:void 0}),(0,i._)(this,y,{writable:!0,value:{}}),(0,i._)(this,_,{writable:!0,value:{}}),(0,i._)(this,x,{writable:!0,value:[]}),(0,i._)(this,k,{writable:!0,value:[]}),(0,i._)(this,N,{writable:!0,value:void 0}),(0,r._)(this,g,t),(0,r._)(this,N,e),(0,r._)(this,f,a),this.isValidated=d,u&&((0,r._)(this,y,u.staticContext),this.cachedFilterCount=u.cachedFilterCount??0,this.cachedFiltersUsed=u.cachedFiltersUsed??[],this.cachedNestedGroupCount=u.cachedNestedGroupCount??0),this.config=l??c.a7,(0,s._)(this,w,j).call(this,t)}};function $(e){return e.options.filterTypes?.multiKey!==!1||this.blocks.filter(t=>(0,h.aK)(t)&&t.key.value===e.key).length<1}function j(e){let t=new Set,l=new Set,i=e=>{for(let a of e)if((0,h.W9)(a)){if(!a.valid)for(let e of a.validations??[])e.message&&t.add(e.message);i(a.blocks)}else if((0,h.aK)(a)&&!1===a.valid&&this.activeBlockId!==a.id){if(a.validationMessage&&t.add(a.validationMessage??""),!a.key.valid)for(let e of a.key.validations??[])e.message&&t.add(e.message);for(let e of a.value.values)if(!1===e.valid)if(e.validations)for(let l of e.validations??[])l.message&&t.add(l.message);else t.add(v.D.filterInvalidValue(a.key.value,(0,h.q5)((0,h.I8)(e.value))??""))}else if(((0,h.oE)(a)||(0,h.iy)(a))&&a.validations)l.add(v.D.unbalancedParentheses);else if((0,h.ON)(a))for(let e of a.validations??[])e.message&&l.add(e.message)};((0,a._)(this,N).match(/"/g)??[]).length%2!=0&&l.add(v.D.unbalancedQuotations),i(e),(0,r._)(this,x,Array.from(t)),(0,r._)(this,k,Array.from(l))}},96218:(e,t,l)=>{l.d(t,{xI:()=>g,g0:()=>f});var a=l(74848),i=l(30459),r=l(96540),s=l(39295),n=l(95104),o=l(63415),u=l(36566),d=(l(50467),l(59403),l(91385),l(33727),l(65154)),c=l(55461),p=(l(15774),l(76904)),v=l(88273);p.e;let NoFilterProviderV2=class NoFilterProviderV2 extends v.Q{constructor(e,t){super(e,d.ak.NoValue,t)}};var m=l(45099);let h=(0,r.createContext)(void 0),f=()=>{let e=(0,r.useContext)(h);if(!e)throw Error("useFilterQuery must be used inside a FilterQueryContext");return e},g=({children:e,context:t,customParser:l,filterConfig:p,providers:v,inputRef:f,onChange:g,onParse:y,onSubmit:_,onValidation:x,rawFilter:k})=>{let N=(0,r.useRef)(k??""),b=(0,r.useRef)(l??new o.i(v.filter(e=>!(0,c.B8)(e)),p)),[w,$]=(0,r.useState)(()=>b.current.parse(k,new n.N,-1)),[j,C]=(0,r.useState)(!0),{inputContextRef:I,config:F}=(0,m.U2)(),B="full"===F.variant?"button_and_input":"input"===F.variant?"input_only":"button_only",{sendClickAnalyticsEvent:S}=(0,i.S)();(0,r.useEffect)(()=>{w.staticContext=t},[t,w]);let A=(0,r.useCallback)(()=>{g(""),_?.(new n.N,d.FT.Clear),f.current?.focus()},[f,g,_]),V=(0,r.useMemo)(()=>{let e={},t=[],l=[];if(v.map(a=>{if((0,c.B8)(a))for(let i of a.filterProviders)e[i.key]=i,i.options.filterTypes.valueless&&t.push(i),i.options.filterTypes.hasValue&&l.push(i);else e[a.key]=a,a.options.filterTypes.valueless&&t.push(a),a.options.filterTypes.hasValue&&l.push(a)}),t.length&&(e.no=new NoFilterProviderV2(t.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0).map(e=>({value:e.key,priority:s.$D,displayName:e.displayName,type:d.ak.Value,icon:e.icon})))),l.length){let t=l.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0).map(e=>({value:e.key,priority:s.$D,displayName:e.displayName,type:d.ak.Value,icon:e.icon}));e.has=new u.M(t)}return b.current.filterProviders=Object.values(e),e},[v]),D=(0,r.useCallback)((e,t=!1)=>{x(e.getErrors(t||document.activeElement!==f.current),new n.N(e.raw,e.blocks,p,e.activeBlock))},[p,f,x]),E=(0,r.useCallback)((e,t,l)=>{C(!1),new Promise((t,a)=>{let i=b.current.parse(l??k,w,e);(0,c.Ed)(i,N.current)?($(i),t(i)):a(Error("Query out of sync, Aborted..."))}).then(e=>b.current.validateFilterQuery(e)).then(e=>new Promise((t,l)=>e&&(0,c.Ed)(e)?($(e),t(e)):l(Error(e?"Out of sync":"Empty Query, Aborted...")))).then(e=>{t?.(e)}).catch(()=>{})},[w,k]),T=(0,r.useCallback)((e,t)=>{E(e||(I.current?.caretStart??-1),e=>{D(e),t?.(e)})},[I,E,D]),P=(0,r.useCallback)(async(e,t,l)=>{let a=l??w;a.clearActiveBlock();let i=0,r=!1;for(;i<=3;)if((0,c.Ed)(a,k)){_?.(a,e),D(a,!0),r=!0;break}else i+=1,await (0,c.he)(10);r||E(I.current?.caretStart??-1,t=>{(0,c.Ed)(t,k)&&(_?.(t,e),D(a,!0))});let s=w.filtersUsed.length>0?w.filtersUsed.join(","):"";S({action:"submit_filter_query",label:`variant:${B};event_type:${e};used_filter_providers:${s};nested_group_depth:${w.nestedGroupCount};submitted_by:${t??"unnamed_submit_method"}`})},[w,I,_,E,D,k,S,B]),R=(0,r.useCallback)((e,t=-1,l,a)=>{let i=e??w.raw;g?.(i),a&&(N.current=i,E(t,e=>{(0,c.Ed)(e,N.current)&&(l?.(e),_?.(e,a),y?.(e))},i))},[w.raw,g,y,_,E]),G=(0,r.useCallback)(e=>{let[t,l]=b.current.replaceActiveBlockWithPresenceBlock(w,e);I.current?.updateCaretPosition(l),R(t,l)},[w,I,R]),L=(0,r.useCallback)((e,t,l=!1)=>{let[a,i]=b.current.insertSuggestion(w,e,t);I.current?.updateCaretPosition(i),I.current?.updateRawFilterValue(a),R(a,i,void 0,l?d.FT.SuggestionSelected:void 0)},[w,I,R]),M=(0,r.useCallback)(e=>{(k!==N.current||j)&&(N.current=k,E(I.current?.caretStart??-1,t=>{D(t),y?.(t),e(t)}))},[I,j,y,E,D,k]),O=(0,r.useMemo)(()=>({clearFilter:A,filterQuery:w,filterProviders:V,forceReparse:T,insertIntoQuery:L,onSubmit:P,rawFilterRef:N,replaceActiveBlockWithPresenceBlock:G,updateFilter:R,updateFromExternal:M}),[A,V,w,T,L,P,G,R,M]);return(0,a.jsx)(h.Provider,{value:O,children:e})};try{h.displayName||(h.displayName="FilterQueryContext")}catch{}try{g.displayName||(g.displayName="FilterQueryContextProvider")}catch{}}}]);
//# sourceMappingURL=packages_filter_Filter_tsx-18a46e93d652.js.map